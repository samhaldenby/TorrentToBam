<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>TorrentToBam: BamExporter Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">TorrentToBam
   &#160;<span id="projectnumber">0.3.0</span>
   </div>
   <div id="projectbrief">ConvertsanddemultiplexesIonTorrentFASTQfilestoBAMfiles</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">BamExporter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="classBamExporter-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4aa0150613ccac4d289394cfbecf549a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#a4aa0150613ccac4d289394cfbecf549a">BamExporter</a> (int barcodeLength, int minReadLength)</td></tr>
<tr class="memdesc:a4aa0150613ccac4d289394cfbecf549a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a4aa0150613ccac4d289394cfbecf549a"></a><br/></td></tr>
<tr class="memitem:a9b705e076ec0bb23a402a2fb9bc86b48"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#a9b705e076ec0bb23a402a2fb9bc86b48">setHeader</a> (std::string header)</td></tr>
<tr class="memdesc:a9b705e076ec0bb23a402a2fb9bc86b48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set BAM header for output files.  <a href="#a9b705e076ec0bb23a402a2fb9bc86b48"></a><br/></td></tr>
<tr class="memitem:a71363ad8a73bbeb381c76412beec2acd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#a71363ad8a73bbeb381c76412beec2acd">setRefs</a> (BamTools::RefVector refs)</td></tr>
<tr class="memdesc:a71363ad8a73bbeb381c76412beec2acd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set references that BAM file was aligned to.  <a href="#a71363ad8a73bbeb381c76412beec2acd"></a><br/></td></tr>
<tr class="memitem:ac16d3a4dde604a7d4ae0cdfecd656d71"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#ac16d3a4dde604a7d4ae0cdfecd656d71">setBarcodeLength</a> (int barcodeLength)</td></tr>
<tr class="memdesc:ac16d3a4dde604a7d4ae0cdfecd656d71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes barcode length.  <a href="#ac16d3a4dde604a7d4ae0cdfecd656d71"></a><br/></td></tr>
<tr class="memitem:acf521439c031655b0d719a94f5e9092d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#acf521439c031655b0d719a94f5e9092d">setMinReadLength</a> (int minReadLength)</td></tr>
<tr class="memdesc:acf521439c031655b0d719a94f5e9092d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes minimum acceptable read length, post trimming.  <a href="#acf521439c031655b0d719a94f5e9092d"></a><br/></td></tr>
<tr class="memitem:a939c932d53245c641a9d3fc91bbf2789"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#a939c932d53245c641a9d3fc91bbf2789">readSampleSheet</a> (std::string sampleSheetName)</td></tr>
<tr class="memdesc:a939c932d53245c641a9d3fc91bbf2789"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads sample sheet information.  <a href="#a939c932d53245c641a9d3fc91bbf2789"></a><br/></td></tr>
<tr class="memitem:a14a8665ed1e68a3cb2d4926e450355cf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#a14a8665ed1e68a3cb2d4926e450355cf">exportAlignment</a> (<a class="el" href="structFqEntry.html">FqEntry</a> entry)</td></tr>
<tr class="memdesc:a14a8665ed1e68a3cb2d4926e450355cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes valid reads to correct BAM file.  <a href="#a14a8665ed1e68a3cb2d4926e450355cf"></a><br/></td></tr>
<tr class="memitem:a42f6aaf2a37c27d959f33861f969e9a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#a42f6aaf2a37c27d959f33861f969e9a0">closeFiles</a> ()</td></tr>
<tr class="memdesc:a42f6aaf2a37c27d959f33861f969e9a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes all export file handles.  <a href="#a42f6aaf2a37c27d959f33861f969e9a0"></a><br/></td></tr>
<tr class="memitem:ac519b7d750628080431a8899b6846c48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTorrentReadStatsBundle.html">TorrentReadStatsBundle</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#ac519b7d750628080431a8899b6846c48">getStats</a> ()</td></tr>
<tr class="memdesc:ac519b7d750628080431a8899b6846c48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for internal stats bundle class.  <a href="#ac519b7d750628080431a8899b6846c48"></a><br/></td></tr>
<tr class="memitem:a852c36278e23d728329d5c6d71e987eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOutputParser.html">OutputParser</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamExporter.html#a852c36278e23d728329d5c6d71e987eb">getOutputParser</a> ()</td></tr>
<tr class="memdesc:a852c36278e23d728329d5c6d71e987eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for internal output parser class.  <a href="#a852c36278e23d728329d5c6d71e987eb"></a><br/></td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4aa0150613ccac4d289394cfbecf549a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBamExporter.html#a4aa0150613ccac4d289394cfbecf549a">BamExporter::BamExporter</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>barcodeLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minReadLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>
<p>Creates Exporter class and initialises barcode length and minimum acceptable read length (post tag/barcode trimming). Sets regular expression pattern for tag searching. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">barcodeLength</td><td>Length of barcode sequence. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">minReadLength</td><td>Minimum acceptable read length, post trimming. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a42f6aaf2a37c27d959f33861f969e9a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classBamExporter.html#a42f6aaf2a37c27d959f33861f969e9a0">BamExporter::closeFiles</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Closes all export file handles. </p>
<p>Deletes each file handle so no memory leakage. </p>

</div>
</div>
<a class="anchor" id="a14a8665ed1e68a3cb2d4926e450355cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBamExporter.html#a14a8665ed1e68a3cb2d4926e450355cf">BamExporter::exportAlignment</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFqEntry.html">FqEntry</a>&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes valid reads to correct BAM file. </p>
<p>Determines (1) which file to write to based on barcode sequence, (2) removes any tag sequences from read, along with barcode, (3) writes to correct BAM file if read is sufficiently long. Also keeps track of run statistics. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>FASTQ entry </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>True if read was long enough to export, false if not. </dd></dl>

</div>
</div>
<a class="anchor" id="a852c36278e23d728329d5c6d71e987eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOutputParser.html">OutputParser</a> &amp; <a class="el" href="classBamExporter.html#a852c36278e23d728329d5c6d71e987eb">BamExporter::getOutputParser</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Getter for internal output parser class. </p>
<dl class="section return"><dt>Returns:</dt><dd>Reference to output parser </dd></dl>

</div>
</div>
<a class="anchor" id="ac519b7d750628080431a8899b6846c48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTorrentReadStatsBundle.html">TorrentReadStatsBundle</a> &amp; <a class="el" href="classBamExporter.html#ac519b7d750628080431a8899b6846c48">BamExporter::getStats</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Getter for internal stats bundle class. </p>
<dl class="section return"><dt>Returns:</dt><dd>Reference to stats bundle </dd></dl>

</div>
</div>
<a class="anchor" id="a939c932d53245c641a9d3fc91bbf2789"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBamExporter.html#a939c932d53245c641a9d3fc91bbf2789">BamExporter::readSampleSheet</a> </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>sampleSheetName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads sample sheet information. </p>
<p>Extracts information from sample sheet. Sample sheet must be tab-seperated with headers Columns are 'Sample Name' and 'Barcode Sequence'. Prepares output files based on this information, that is stored in internal <a class="el" href="structOutputParser.html">OutputParser</a> class </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sampleSheetName</td><td>File name of sample sheet </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Operation success/failure </dd></dl>

</div>
</div>
<a class="anchor" id="ac16d3a4dde604a7d4ae0cdfecd656d71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBamExporter.html#ac16d3a4dde604a7d4ae0cdfecd656d71">BamExporter::setBarcodeLength</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>barcodeLength</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Changes barcode length. </p>
<p>Checks lower but not upper bounds, i.e. must be greater than 0 </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">barcodeLength</td><td>Length of barcode sequence. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Operation success/failure </dd></dl>

</div>
</div>
<a class="anchor" id="a9b705e076ec0bb23a402a2fb9bc86b48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBamExporter.html#a9b705e076ec0bb23a402a2fb9bc86b48">BamExporter::setHeader</a> </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>header</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set BAM header for output files. </p>
<p>User must format header string according to SAM specifications </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">header</td><td>Formatted header. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Operation success/failure </dd></dl>

</div>
</div>
<a class="anchor" id="acf521439c031655b0d719a94f5e9092d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBamExporter.html#acf521439c031655b0d719a94f5e9092d">BamExporter::setMinReadLength</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minReadLength</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Changes minimum acceptable read length, post trimming. </p>
<p>Checks lower but not upper bounds, i.e. must be greater than 0 </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">minReadLength</td><td>Minimum acceptable read length. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Operation success/failure </dd></dl>

</div>
</div>
<a class="anchor" id="a71363ad8a73bbeb381c76412beec2acd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBamExporter.html#a71363ad8a73bbeb381c76412beec2acd">BamExporter::setRefs</a> </td>
          <td>(</td>
          <td class="paramtype">BamTools::RefVector&#160;</td>
          <td class="paramname"><em>refs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set references that BAM file was aligned to. </p>
<p>Only required as BamTools API requires this information despite using unaligned BAM file output. Therefore, this is usually an empty vector. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">refs</td><td>References (usually empty RefVector) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Operation success/failure </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="BamExporter_8hpp_source.html">BamExporter.hpp</a></li>
<li>BamExporter.cpp</li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 2 2012 11:26:47 for TorrentToBam by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
